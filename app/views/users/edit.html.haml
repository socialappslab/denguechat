= render :partial => "shared/flashes"
= render :partial => "shared/form_errors", :locals => {:item => @user}

.row
  .span8.offset1
    .well{:style => "border: 1px solid #bdc3c7; text-align: center;"}
      = form_for(@user, :html => {name: "configuration", :class => "form-horizontal"}, :url => {:action => "update", :house_name_confirmation => @house_name_confirmation, :html => {:class => "form-horizontal", :autocomplete => "off", :multipart => true}}) do |f|
        %h1{:id => "role_title"}
          = I18n.t("common_terms.configuration")
        %br

        .control-group

          = f.label :first_name, :class => "control-label", :style => "position: relative" do
            = I18n.t("activerecord.attributes.user.first_name")
            %span{:style => "position:absolute; top: 0px; right: -10px; color: #ff6600; font-size: 10px;"}
              *

          .controls
            = f.text_field :first_name, :class => "form-control"

        .control-group
          = f.label :last_name, :class => "control-label", :style => "position: relative" do
            = I18n.t("activerecord.attributes.user.last_name")
            %span{:style => "position:absolute; top: 0px; right: -10px; color: #ff6600; font-size: 10px;"}
              *
          .controls
            = f.text_field :last_name, :class => "form-control"

        .control-group
          = f.label :nickname, :class => "control-label"
          .controls
            = f.text_field :nickname, :class => "form-control"

        .control-group
          = f.label I18n.t("views.users.edit.show_name_as"), :class => "control-label"
          .controls
            = f.select :display, options_for_select(@user.display_name_options, @user.display),{:name => "display", :id => "display_select"}

        .control-group
          = f.label :gender, :class => "control-label"
          .controls

            = f.radio_button :gender, "true", :checked => (@user.gender == true), :class => "inline"
            = I18n.t("common_terms.male")
            = f.radio_button :gender, "false", :checked => (@user.gender == false), :class => "inline"
            = I18n.t("common_terms.female")


        .control-group
          = f.label :email, :class => "control-label", :style => "position: relative;" do
            = I18n.t("activerecord.attributes.user.email")
            %span{:style => "position:absolute; top: 0px; right: -10px; color: #ff6600; font-size: 10px;"}
              *
          .controls
            = f.text_field :email, :class => "form-control"


        .control-group
          = f.label :profile_photo, :class => "control-label"
          .controls
            = f.file_field :profile_photo, :class => "form-control"


        .control-group
          = f.label nil, :class => "control-label", :style => "position: relative;" do
            = I18n.t("attributes.neighborhood_id")
            %span{:style => "position:absolute; top: 0px; right: -10px; color: #ff6600; font-size: 10px;"}
              *
          .controls
            / TODO: We're disabling choosing other neighborhoods until we introduce
            / another neighborhood
            /= f.select(:neighborhood_id, Neighborhood.all.map {|n| [n.name, n.id]})
            - mare = Neighborhood.find_by_name("Maré")
            = f.select :neighborhood_id, [ [mare.name, mare.id] ], :class => "form-control"

        .control-group
          = f.label :password, :class => "control-label"
          .controls
            = link_to "Alterar minha senha", edit_password_reset_path(@user), :class => "form-control", :id => "reset_password_link",id:'password_reset'

        %hr{:style => "border-color: #ff6600; border-bottom: none;"}
        .control-group
          = f.label :phone_number, :class => "control-label"
          .controls
            = f.text_field :phone_number, :placeholder => "0219xxxxxxxx", :class => "form-control"

        .control-group
          = f.label :carrier, :class => "control-label"
          .controls
            = f.text_field :carrier, :class => "form-control"

        .control-group
          = f.label :prepaid, :class => "control-label"
          .controls
            = f.radio_button :prepaid, "true", id:"pre_paid_radio", checked: "checked"
            Pré-pago
            = f.radio_button :prepaid, "false", id:"post_paid_radio"
            Pós-pago

        %hr{:style => "border-color: #ff6600; border-bottom: none;"}

        .control-group
          = f.label nil, :class => "control-label", :style => "position: relative;" do
            = I18n.t("views.users.edit.referral_question")
            %span{:style => "position:absolute; top: 0px; right: -10px; color: #ff6600; font-size: 10px;"}
              *
          .controls
            - user_recruiter = ( @user.recruiter.present? ? [ @user.recruiter.full_name, @user.recruiter.id ] : nil )
            = select_tag :recruiter_id, options_for_select(User.all.map {|u| [u.full_name, u.id]}, user_recruiter ), :prompt => I18n.t("common_terms.no_one")


        #house_configuration
          = f.submit I18n.t("views.button.confirm"), {:class => "btn btn-success btn-large btn-block"}


  .span1
    %br
  .span7

    -# Create or join a team section.
    .well{:style => "border: 1px solid #bdc3c7; text-align: center;"}
      %h1{:id => "role_title"}
        = I18n.t("activerecord.models.team", :count => 2)
      %br
      = link_to I18n.t("views.teams.create"), teams_path(:form => true), :class => "btn btn-info btn-large btn-block"


      %h3{:style => "margin: 20px;"}
        = I18n.t("common_terms.or")

      = link_to I18n.t("views.teams.join"), teams_path, :class => "btn btn-info btn-large btn-block"

    - if @user == @current_user
      .well{:style => "border: 1px solid #bdc3c7;"}
        - if @current_user.can_manage_other_users?
          = render :partial => "users/admin_links"
        - elsif @current_user.role == User::Types::SPONSOR
          %hr{:style => "border-color: #ff6600; border-bottom: none;"}
          = render :partial => "users/sponsor_links"
