- content_for :dashboard_content do
  .row
    .col-md-12
      %table.table.table-bordered.table-hover{:style => "text-align: center;"}
        %thead
          %th.text-center
            File
          %th.text-center
            Address
          %th.text-center
            Visit time
          %th.text-center
            Status
        %tbody
          - @csvs.each do |csv|
            %tr
              // NOTE: rowspan should always be +1 since it's counting its own
              // tr as well.
              - csv_row_span = csv.visits.map {|v| v.inspections.count + 1}.sum
              %td{:rowspan => (csv_row_span + 1) }
                = link_to csv.csv_file_name, csv.csv.url
              %td{:rowspan => (csv_row_span + 1) }
                = csv.location.address
              - if csv.visits.length == 0
                %td
              - else
                - csv.visits.order("visited_at ASC").includes(:inspections).each do |visit|
                  %tr
                    %td{:rowspan => (visit.inspections.count + 1)}
                      = format_csv_timestamp(visit.visited_at)

                    - visit.inspections.each do |inspection|
                      %tr
                        %td{:style => "background-color:#{color_for_inspection_status(inspection.identification_type)}"}
                          = inspection.id
