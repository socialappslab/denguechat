/------------------------------------------------------------------------------

= render :partial => "shared/flashes"

/------------------------------------------------------------------------------
.row{:style => "margin-bottom: 30px;"}
  .col-md-7.col-md-offset-1
    %p{:style => "margin-top: 10px;"}
      %i.fa.fa-lock
      Este es un sitio privado, sÃ³lo usted lo puede ver.

.row
  .col-md-8.col-md-offset-1
    %h1{:style => "font-size: 30px; margin-bottom: 30px;"}
      Sus reportes cargados en CSV
  .col-md-2
    = link_to new_neighborhood_csv_report_path(@neighborhood), :class => "btn btn-success btn-large", :style => "margin-bottom:20px;" do
      %i.fa.fa-file
      = I18n.t("views.buttons.upload_csv")


= @statistics.inspect

- if @csv_reports.present?
  .row{:style => "margin-top: 20px;"}
    .col-md-10.col-md-offset-1


      #ex1


- if @csv_reports.present?
  .row{:style => "margin-top: 20px;"}
    .col-md-10.col-md-offset-1
      = render :partial => "shared/visit_statistics"


  .row{:style => "margin-top: 20px;"}
    .col-md-10.col-md-offset-1
      %table.table.table-bordered
        %thead
          %th
            Lugar
          %th
            Fecha
          %th
            Descargar
        - @csv_reports.each do |type|
          %tr
            %td{:style => "font-weight: bold;"}
              = type.location.address
            %td
              = type.created_at.strftime("%Y-%m-%d")
            %td
              = link_to type.csv_file_name, type.csv.url



%script{:src => "https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart']}]}", :type => "text/javascript"}


:javascript
  google.load('visualization', '1', {packages: ['corechart']});
  google.setOnLoadCallback(drawChart);
  var statistics = #{@statistics.to_json};
  window.test = statistics

  function drawChart() {

    // data.addColumn('number', 'X');
    // data.addColumn('number', 'Dogs');
    statistics.unshift(["Time", "Percent of positive and potential sites"])

    // data.addRows(statistics);
    var data = new google.visualization.arrayToDataTable(statistics);

    var options = {
      width: 1000,
      height: 563,
      hAxis: {
        title: 'Time'
      },
      vAxis: {
        title: 'Percent of positive and potential sites'
      },
      backgroundColor: '#eff0f3'
    };

    var chart = new google.visualization.LineChart(document.getElementById('ex1'));

    chart.draw(data, options);
  }
