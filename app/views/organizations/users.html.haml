= render :partial => "shared/flashes"

.container
  -# .row
  -#   .col-md-6.col-xs-6
  -#
  -#   .col-md-6.col-xs-6
  -#     %p.description
  -#       .pull-right
  -#         = render :partial => "shared/filter_by_community"


  .row
    .col-md-12
      .panel.panel-default
        %table.table.table-bordered
          %thead
            %th
              DengueChat ID
            %th
              = I18n.t("activerecord.attributes.user.username")
            %th Oficio
            %th
              = I18n.t("views.admin.actions")

          - @memberships.each do |membership|
            - user = membership.user
            %tr
              %td
                = user.id
              %td
                = link_to edit_user_path(user) do
                  =  user.username
                  = "(#{user.email}, #{user.full_name})"
              %td
                = form_for membership, :url => membership_organizations_path(membership), :method => "PUT" do |f|
                  = hidden_field_tag "redirect_path", request.path
                  .form-inline
                    .form-group
                      = f.select :role, options_for_select([ [Membership::Roles::ADMIN, Membership::Roles::ADMIN] , [Membership::Roles::COORDINATOR, Membership::Roles::COORDINATOR], [Membership::Roles::RESIDENT, Membership::Roles::RESIDENT] ], :selected => membership.role), {}, :class => "form-control"
                      = f.submit I18n.t("views.buttons.save"), "class" => "btn btn-success"
              %td
                = link_to (user.is_blocked ? I18n.t("views.admin.unblock") : I18n.t("views.admin.block") ), block_coordinator_user_path(user), method: "PUT", data: { confirm: I18n.t("views.alerts.confirm")}, :class => "btn btn-xs btn-danger"
