#controller{'ng-controller'=>'ReportListController'}
  #reports{'data-url'=>@report_json}
  %br

  #reports
    #report_loop{'ng-repeat'=>'report in reports track by $index'}
      .rp_report.rp_open_report
        .row
          -#Header
          .rp_report_status.status
            -#elimination status
            .rp_report_options{:style => "margin-top:-3px;"}
              -#Time remaining and admin options
              -#Options for SMS submission - check on this

        -#body - top row
        .row{style: "margin-top:5px;"}
          .span6{:style => "margin-top:10px;"}
            -#address or SMS info (? .report)
          .span2
            -#if .location.lat/long  place on map. See code below
            -#= link_to "Ache no mapa", "#", id: "mapa_#{open.id}", class: "mapa", data: { latitude: "#{open.location.latitude}", longitude: "#{open.location.longitude}"}, style: "margin-top:5px;float:right;border:1px solid gray;margin-right:-6px;padding:2px;"

        -#body - middle row
        .row{style: "margin-top:7px;"}
          .span2.rp_before_photo
            -#=image_tag open.before_photo(:medium)
          .span5{style: "margin-top:9px;"}
            -#elimination type
                -#Do we need a check for nil user?
                -#- if @current_user != nil
            .row
              .span7
                .eliminate_prompt{:style => "margin-top:5px;"}
                  = form_for(:eliminate, :url => {:controller => "reports", :action => "update", :html => {:autocomplete => "off", :multipart => false}}, :method=>:put) do |f|
                    -#report_id
                    -#sms check
                    -#elimination_type
                      -#STYLING->= select_tag "elimination_type", options_for_select(@elimination_types, open.elimination_type), :prompt => "Selecione o tipo de foco", :style => "width:430px;", class: "elimination_type", :disabled => (open.elimination_type != nil or @current_user.role == "visitante" or open.sms_incomplete?)
                    -#elimination_method
                      -STYLING->#=select_tag "elimination_method", options_for_select(elimination_selection(open.elimination_type).collect{|p| [p[:display],p[:name]]}), :prompt=>open.method_prompt, :id=>"method_selection", :class=>"elimination_methods"
                    -#= hidden_field_tag "selected_elimination_method"
                    -# Do we need this? Bootstrap picker
                      :javascript
                        $(".selectpicker").selectpicker();

                      -#After photo if one is available
                        -#  .rp_report_people
                            Foto carregada:
                            = link_to "#{open.after_photo_file_name}", open.after_photo.url, :class => "user"

                    -#- if elimination type selected allow for photo upload
                        %h3{:style => "font-size: 14px;"} Carregue uma foto do foco eliminado
                        = f.file_field :after_photo, :disabled => (open.after_photo_file_size or open.expired?)
                        %br

                    -#submit
                      = submit_tag "Enviar!", :style => "margin-left:5px;margin-top:5px;", :disabled => ((@current_user.role == "verificador" or @current_user.role == "visitante") or open.expired? or open.isVerified == "f" or open.sms_incomplete?)



                    .row.rp_report_people{style: "width:430px;"}
                      Marcado por:
                      -#User and time
                      -#  =link_to open.reporter_name + " " + open.strftime_with(:created_at), user_path(open.reporter), :class => "user"
                      -#  %br

                        -#if verifed
                          Verificado por:
                          = link_to open.verifier_name + " " + open.strftime_with(:created_at), user_path(open.verifier), :class => "user"
                          %br
                        -#if denied verification
                          %p{:style => "color:red;font-weight:bold;margin-top:10px;"}
                            Problema no foco marcado. Entre em contato conosco.

          -#body - bottom row
          .row
            .rp_report_options
            -#Options, admin => delete, user (hasn't completed) => delete
              - if @current_user.admin? or (open.reporter == @current_user and open.elimination_type == nil)
                =link_to (image_tag 'icons/reports icon/delete2.png', :id=>'user_report_delete'), open, :confirm => "VocÃª tem certeza?", :method => :delete, :style => "margin-right:5px;"

  #stuff